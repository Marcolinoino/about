<div class="terminal" id="advancedTerminal">
    <div class="terminal-header">
        <span class="dot red"></span>
        <span class="dot yellow"></span>
        <span class="dot green"></span>
        <span class="terminal-title">portfolio-cli</span>
    </div>
    <div class="terminal-body" id="terminalOutput"></div>
    <div class="terminal-input">
        <span class="prompt">$</span>
        <input type="text" id="terminalInput" autocomplete="off" spellcheck="false">
    </div>
</div>

<script>
const terminal = {
    config: {
        user: "visitor",
        host: "portfolio",
        lang: "it"
    },
    commands: {
        help: () => Object.keys(this.commands).join(", "),
        clear: () => { terminal.clear(); return ""; },
        about: () => `Ciao sono Marco, sviluppatore Java e security specialist...`,
        theme: (args) => {
            const themes = {
                dark: { bg: "#1e1e1e", text: "#f8f8f8" },
                light: { bg: "#f8f8f8", text: "#1e1e1e" },
                matrix: { bg: "#000", text: "#0f0" }
            };
            return terminal.setTheme(themes[args[0]] || themes.dark);
        }
    },
    init() {
        this.output = document.getElementById('terminalOutput');
        this.input = document.getElementById('terminalInput');
        
        this.input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                this.processCommand(this.input.value);
                this.input.value = '';
            }
        });
        
        this.printWelcome();
    },
    printWelcome() {
        this.print(`
        Benvenuto nel mio portfolio interattivo!
        Digita 'help' per la lista dei comandi disponibili.
        `);
        this.printPrompt();
    },
    printPrompt() {
        this.print(`\n${this.config.user}@${this.config.host}:~$ `, false);
    },
    print(text, newline = true) {
        const p = document.createElement('p');
        p.textContent = (newline ? '\n' : '') + text;
        this.output.appendChild(p);
        this.output.scrollTop = this.output.scrollHeight;
    },
    processCommand(cmd) {
        const [command, ...args] = cmd.split(' ');
        const output = this.commands[command]?.(args) || `Comando non trovato: ${command}`;
        this.print(output);
        this.printPrompt();
    },
    clear() {
        this.output.innerHTML = '';
    },
    setTheme(theme) {
        document.querySelector('.terminal').style.backgroundColor = theme.bg;
        document.querySelector('.terminal').style.color = theme.text;
        return `Tema impostato a ${theme}`;
    }
};

terminal.init();
</script>
