<!-- Terminal Section -->
<div class="terminal-container">
    <div class="terminal-header">
        <div class="terminal-buttons">
            <span class="terminal-btn red"></span>
            <span class="terminal-btn yellow"></span>
            <span class="terminal-btn green"></span>
        </div>
        <div class="terminal-title">marco@portfolio: ~</div>
    </div>
    <div class="terminal-body" id="terminalOutput">
        <div class="terminal-line">
            <span class="terminal-user">marco@portfolio</span>
            <span class="terminal-path">~</span>
            <span class="terminal-prompt">$</span>
            <span class="terminal-command">starting portfolio terminal...</span>
        </div>
        <div class="terminal-response">
            <span class="terminal-cursor"></span>
        </div>
    </div>
</div>

<style>
    /* Terminal Styles */
    .terminal-container {
        max-width: 800px;
        margin: 40px auto 0;
        background: #1e1e1e;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        border: 1px solid #333;
        font-family: 'JetBrains Mono', monospace;
    }

    .terminal-header {
        background: #2d2d2d;
        padding: 8px 12px;
        display: flex;
        align-items: center;
        border-bottom: 1px solid #1a1a1a;
    }

    .terminal-buttons {
        display: flex;
        gap: 8px;
    }

    .terminal-btn {
        width: 14px;
        height: 14px;
        border-radius: 50%;
        display: inline-block;
        cursor: pointer;
        transition: transform 0.2s ease;
    }

    .terminal-btn:hover {
        transform: scale(1.1);
    }

    .terminal-btn.red { background: #ff5f56; }
    .terminal-btn.yellow { background: #ffbd2e; }
    .terminal-btn.green { background: #27c93f; }

    .terminal-title {
        flex: 1;
        text-align: center;
        font-size: 0.85rem;
        color: #b3b3b3;
        font-weight: 500;
    }

    .terminal-body {
        padding: 15px;
        height: 220px;
        overflow-y: auto;
        background: #1e1e1e;
        color: #f0f0f0;
        font-size: 0.95rem;
        line-height: 1.6;
    }

    .terminal-line {
        margin-bottom: 8px;
        word-break: break-word;
    }

    .terminal-user {
        color: #7eda28;
        font-weight: bold;
    }

    .terminal-path {
        color: #4878c0;
        font-weight: bold;
    }

    .terminal-prompt {
        color: #dddddd;
        margin: 0 5px;
    }

    .terminal-command {
        color: #ffffff;
    }

    .terminal-response {
        margin-bottom: 15px;
        color: #cccccc;
    }

    .terminal-cmd {
        color: #7eda28;
        font-weight: bold;
    }

    .terminal-cursor {
        display: inline-block;
        width: 8px;
        height: 16px;
        background: #f0f0f0;
        vertical-align: middle;
        margin-left: 2px;
        animation: blink 1s infinite;
    }

    @keyframes blink {
        0%, 100% { opacity: 1; }
        50% { opacity: 0; }
    }

    /* Scrollbar styling */
    .terminal-body::-webkit-scrollbar {
        width: 8px;
    }

    .terminal-body::-webkit-scrollbar-track {
        background: #1a1a1a;
    }

    .terminal-body::-webkit-scrollbar-thumb {
        background: #444;
        border-radius: 4px;
    }

    .terminal-body::-webkit-scrollbar-thumb:hover {
        background: #555;
    }
</style>

<script>
    // Terminal Interactive Script
    const terminalMessages = [
        "Benvenuto nel portfolio di Marco De Luca!",
        "> Java Developer | Security Specialist",
        "> Laureando in Sicurezza Informatica",
        "> Esperto in Spring Boot e Spring Security",
        "Digita 'help' per vedere i comandi disponibili",
        "Oppure naviga il sito per scoprire di pi√π!"
    ];

    const terminalCommands = {
        "help": "Comandi disponibili: about, skills, experience, contact, clear",
        "about": "Marco De Luca - Sviluppatore Java e Security Specialist con esperienza nello sviluppo di applicazioni web sicure.",
        "skills": "Competenze principali: Java, Spring Boot, Python, JavaScript, MySQL, Cybersecurity",
        "experience": "Esperienze: Consulente Informatico (Abruzzo Progetti), Junior Java Developer (CGM Consulting)",
        "contact": "Contatti: email - marcodeluca99@gmail.com | telefono - (+39) 328 648 3074",
        "clear": ""
    };

    const terminalOutput = document.getElementById('terminalOutput');
    let messageIndex = 0;

    function typeWriter(text, element, speed, callback) {
        let i = 0;
        element.innerHTML = element.innerHTML.replace('<span class="terminal-cursor"></span>', '');
        const timer = setInterval(() => {
            if (i < text.length) {
                element.innerHTML += text.charAt(i);
                terminalOutput.scrollTop = terminalOutput.scrollHeight;
                i++;
            } else {
                clearInterval(timer);
                element.innerHTML += '<span class="terminal-cursor"></span>';
                if (callback) callback();
            }
        }, speed);
    }

    function addTerminalMessage() {
        if (messageIndex < terminalMessages.length) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'terminal-line';
            
            if (messageIndex > 0) {
                messageDiv.innerHTML = `
                    <span class="terminal-user">marco@portfolio</span>
                    <span class="terminal-path">~</span>
                    <span class="terminal-prompt">$</span>
                    <span class="terminal-command"></span>
                `;
                
                const commandSpan = messageDiv.querySelector('.terminal-command');
                typeWriter(terminalMessages[messageIndex], commandSpan, 30, () => {
                    setTimeout(() => {
                        const responseDiv = document.createElement('div');
                        responseDiv.className = 'terminal-response';
                        responseDiv.innerHTML = '<span class="terminal-cursor"></span>';
                        terminalOutput.appendChild(responseDiv);
                        terminalOutput.scrollTop = terminalOutput.scrollHeight;
                        messageIndex++;
                        setTimeout(addTerminalMessage, 800);
                    }, 500);
                });
            } else {
                messageDiv.innerHTML = `
                    <span class="terminal-response">${terminalMessages[messageIndex]}<span class="terminal-cursor"></span></span>
                `;
                messageIndex++;
                setTimeout(addTerminalMessage, 1200);
            }
            
            terminalOutput.appendChild(messageDiv);
            terminalOutput.scrollTop = terminalOutput.scrollHeight;
        } else {
            // Ready for user input
            setupTerminalInput();
        }
    }

    function setupTerminalInput() {
        const inputLine = document.createElement('div');
        inputLine.className = 'terminal-line';
        inputLine.innerHTML = `
            <span class="terminal-user">marco@portfolio</span>
            <span class="terminal-path">~</span>
            <span class="terminal-prompt">$</span>
            <span class="terminal-command"><span class="terminal-cursor"></span></span>
        `;
        terminalOutput.appendChild(inputLine);
        
        const commandSpan = inputLine.querySelector('.terminal-command');
        let command = '';
        let cursorVisible = true;
        
        // Blink cursor
        const cursorInterval = setInterval(() => {
            cursorVisible = !cursorVisible;
            const cursor = commandSpan.querySelector('.terminal-cursor');
            if (cursor) {
                cursor.style.opacity = cursorVisible ? '1' : '0';
            }
        }, 500);
        
        // Focus terminal
        terminalOutput.parentElement.addEventListener('click', () => {
            commandSpan.focus();
        });
        
        // Make command span focusable
        commandSpan.setAttribute('tabindex', '0');
        commandSpan.focus();
        
        commandSpan.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                processCommand(command);
                command = '';
            } else if (e.key === 'Backspace') {
                if (command.length > 0) {
                    command = command.slice(0, -1);
                    commandSpan.innerHTML = command + '<span class="terminal-cursor"></span>';
                }
            } else if (e.key.length === 1) {
                command += e.key;
                commandSpan.innerHTML = command + '<span class="terminal-cursor"></span>';
            }
            
            terminalOutput.scrollTop = terminalOutput.scrollHeight;
        });
        
        function processCommand(cmd) {
            clearInterval(cursorInterval);
            
            // Remove cursor from current line
            commandSpan.innerHTML = command;
            
            // Add response
            const responseDiv = document.createElement('div');
            responseDiv.className = 'terminal-response';
            
            if (cmd.trim() === '') {
                // Do nothing for empty command
            } else if (terminalCommands[cmd]) {
                if (cmd === 'clear') {
                    terminalOutput.innerHTML = '';
                } else {
                    responseDiv.textContent = terminalCommands[cmd];
                }
            } else {
                responseDiv.textContent = `Comando non riconosciuto: ${cmd}. Digita 'help' per la lista dei comandi.`;
            }
            
            if (cmd !== 'clear') {
                terminalOutput.appendChild(responseDiv);
            }
            
            // Add new input line
            setupTerminalInput();
            terminalOutput.scrollTop = terminalOutput.scrollHeight;
        }
    }

    // Start terminal animation
    setTimeout(addTerminalMessage, 800);
</script>
